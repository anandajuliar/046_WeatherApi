<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informasi Cuaca Sederhana</title>
    <style>
        body {
            background-color: #f0f8ff; 
            padding-top: 50px;
        }
        .weather-card {
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            background: linear-gradient(135deg, #ffffff, #e0f7fa); 
        }
        .data-label {
            font-weight: 600;
            color: #555;
        }
        .data-value {
            color: #007bff;
            font-weight: 700;
        }
        #suhu-display {
            font-size: 4rem;
            color: #dc3545; 
        }
        .main-title {
            color: #007bff;
            margin-bottom: 30px;
            font-weight: 800;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="text-center main-title">Cek Cuaca</h1>

        <div class="row justify-content-center mb-5">
            <div class="col-md-6">
                <div class="input-group">
                    <input type="text" id="input-lokasi" class="form-control form-control-lg" placeholder="Masukkan Nama Kota (mis: Jakarta, London)" required>
                    <button class="btn btn-primary btn-lg" type="button" id="btn-cari">
                        Cari Cuaca
                    </button>
                </div>
            </div>
        </div>

        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card weather-card p-4" id="tampilan-cuaca">
                    <div id="loading-message" class="text-center text-muted">
                        Masukkan nama lokasi dan klik "Cari Cuaca" untuk memulai.
                    </div>
                    
                    <div id="hasil-data" style="display: none;">
                        <div class="text-center mb-4">
                            <span class="data-label fs-5">Cuaca di</span>
                            <h2 id="lokasi-display" class="mb-0 text-dark"></h2>
                        </div>
                        
                        <div class="text-center mb-5">
                            <span id="suhu-display">--</span> 
                            <span class="align-top display-6">Â°C</span>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item bg-transparent">
                                        <span class="data-label">Negara:</span> 
                                        <span id="negara-val" class="data-value">--</span>
                                    </li>
                                    <li class="list-group-item bg-transparent">
                                        <span class="data-label">Provinsi/Region:</span> 
                                        <span id="provinsi-val" class="data-value">--</span>
                                    </li>
                                    <li class="list-group-item bg-transparent">
                                        <span class="data-label">Kecamatan/Area:</span> 
                                        <span id="kecamatan-val" class="data-value">--</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item bg-transparent">
                                        <span class="data-label">Latitude (Lintang):</span> 
                                        <span id="latitude-val" class="data-value">--</span>
                                    </li>
                                    <li class="list-group-item bg-transparent">
                                        <span class="data-label">Longitude (Bujur):</span> 
                                        <span id="longitude-val" class="data-value">--</span>
                                    </li>
                                    <li class="list-group-item bg-transparent">
                                        <span class="data-label">Kondisi:</span> 
                                        <span id="kondisi-val" class="data-value">--</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const API_KEY = "8a28fd6a742b4fdcb0340607250610"; //api saya
        
        function getWeatherData(location) {
            const urlapi = `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${location}&aqi=no`;

            $('#loading-message').html('<div class="spinner-border text-primary" role="status"></div><p class="mt-2">Memuat data cuaca...</p>').show();
            $('#hasil-data').hide();

            $.ajax({
                url: urlapi,
                method: "GET",
                success: function(data) {
                    console.log(data);
                    
                    const locationData = data.location;
                    const currentData = data.current;
                    $('#lokasi-display').text(locationData.name);
                    $('#negara-val').text(locationData.country);
                    $('#provinsi-val').text(locationData.region || '-'); 
                    $('#kecamatan-val').text(locationData.name); 
                    $('#suhu-display').text(currentData.temp_c);
                    $('#latitude-val').text(locationData.lat);
                    $('#longitude-val').text(locationData.lon);
                    $('#kondisi-val').text(currentData.condition.text); 

                    $('#loading-message').hide();
                    $('#hasil-data').fadeIn();
                },
                error: function(xhr, status, error) {
                    let errorMessage = "Gagal memuat data cuaca. Coba lagi.";
                    if (xhr.responseJSON && xhr.responseJSON.error) {
                        errorMessage = `Error: ${xhr.responseJSON.error.message}`;
                    }
                    $('#loading-message').html(`<div class="alert alert-danger" role="alert">${errorMessage}</div>`).show();
                    $('#hasil-data').hide();
                }
            });
        }

        $('#btn-cari').on('click', function() {
            const location = $('#input-lokasi').val().trim();
            if (location) {
                getWeatherData(location);
            } else {
                alert("Mohon masukkan nama lokasi!");
            }
        });


        $('#input-lokasi').on('keypress', function(e) {
            if (e.which === 13) {
                $('#btn-cari').click();
            }
        });
        
        $(document).ready(function() {
            getWeatherData("Yogyakarta");
        });
    </script>

</body>
</html>


